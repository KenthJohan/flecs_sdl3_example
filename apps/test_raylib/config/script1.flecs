using eg.meshes
using eg.shapes
using eg.spatials
using flecs.units


const   KEY_NULL            : 0        // Key: NULL used for no key pressed
const   KEY_APOSTROPHE      : 39       // Key: '
const   KEY_COMMA           : 44       // Key: 
const   KEY_MINUS           : 45       // Key: -
const   KEY_PERIOD          : 46       // Key: .
const   KEY_SLASH           : 47       // Key: /
const   KEY_ZERO            : 48       // Key: 0
const   KEY_ONE             : 49       // Key: 1
const   KEY_TWO             : 50       // Key: 2
const   KEY_THREE           : 51       // Key: 3
const   KEY_FOUR            : 52       // Key: 4
const   KEY_FIVE            : 53       // Key: 5
const   KEY_SIX             : 54       // Key: 6
const   KEY_SEVEN           : 55       // Key: 7
const   KEY_EIGHT           : 56       // Key: 8
const   KEY_NINE            : 57       // Key: 9
const   KEY_SEMICOLON       : 59       // Key: ;
const   KEY_EQUAL           : 61       // Key: =
const   KEY_A               : 65       // Key: A | a
const   KEY_B               : 66       // Key: B | b
const   KEY_C               : 67       // Key: C | c
const   KEY_D               : 68       // Key: D | d
const   KEY_E               : 69       // Key: E | e
const   KEY_F               : 70       // Key: F | f
const   KEY_G               : 71       // Key: G | g
const   KEY_H               : 72       // Key: H | h
const   KEY_I               : 73       // Key: I | i
const   KEY_J               : 74       // Key: J | j
const   KEY_K               : 75       // Key: K | k
const   KEY_L               : 76       // Key: L | l
const   KEY_M               : 77       // Key: M | m
const   KEY_N               : 78       // Key: N | n
const   KEY_O               : 79       // Key: O | o
const   KEY_P               : 80       // Key: P | p
const   KEY_Q               : 81       // Key: Q | q
const   KEY_R               : 82       // Key: R | r
const   KEY_S               : 83       // Key: S | s
const   KEY_T               : 84       // Key: T | t
const   KEY_U               : 85       // Key: U | u
const   KEY_V               : 86       // Key: V | v
const   KEY_W               : 87       // Key: W | w
const   KEY_X               : 88       // Key: X | x
const   KEY_Y               : 89       // Key: Y | y
const   KEY_Z               : 90       // Key: Z | z
const   KEY_LEFT_BRACKET    : 91       // Key: [
const   KEY_BACKSLASH       : 92       // Key: '\'
const   KEY_RIGHT_BRACKET   : 93       // Key: ]
const   KEY_GRAVE           : 96       // Key: `
const   KEY_SPACE           : 32       // Key: Space
const   KEY_ESCAPE          : 256      // Key: Esc
const   KEY_ENTER           : 257      // Key: Enter
const   KEY_TAB             : 258      // Key: Tab
const   KEY_BACKSPACE       : 259      // Key: Backspace
const   KEY_INSERT          : 260      // Key: Ins
const   KEY_DELETE          : 261      // Key: Del
const   KEY_RIGHT           : 262      // Key: Cursor right
const   KEY_LEFT            : 263      // Key: Cursor left
const   KEY_DOWN            : 264      // Key: Cursor down
const   KEY_UP              : 265      // Key: Cursor up
const   KEY_PAGE_UP         : 266      // Key: Page up
const   KEY_PAGE_DOWN       : 267      // Key: Page down
const   KEY_HOME            : 268      // Key: Home
const   KEY_END             : 269      // Key: End
const   KEY_CAPS_LOCK       : 280      // Key: Caps lock
const   KEY_SCROLL_LOCK     : 281      // Key: Scroll down
const   KEY_NUM_LOCK        : 282      // Key: Num lock
const   KEY_PRINT_SCREEN    : 283      // Key: Print screen
const   KEY_PAUSE           : 284      // Key: Pause
const   KEY_F1              : 290      // Key: F1
const   KEY_F2              : 291      // Key: F2
const   KEY_F3              : 292      // Key: F3
const   KEY_F4              : 293      // Key: F4
const   KEY_F5              : 294      // Key: F5
const   KEY_F6              : 295      // Key: F6
const   KEY_F7              : 296      // Key: F7
const   KEY_F8              : 297      // Key: F8
const   KEY_F9              : 298      // Key: F9
const   KEY_F10             : 299      // Key: F10
const   KEY_F11             : 300      // Key: F11
const   KEY_F12             : 301      // Key: F12
const   KEY_LEFT_SHIFT      : 340      // Key: Shift left
const   KEY_LEFT_CONTROL    : 341      // Key: Control left
const   KEY_LEFT_ALT        : 342      // Key: Alt left
const   KEY_LEFT_SUPER      : 343      // Key: Super left
const   KEY_RIGHT_SHIFT     : 344      // Key: Shift right
const   KEY_RIGHT_CONTROL   : 345      // Key: Control right
const   KEY_RIGHT_ALT       : 346      // Key: Alt right
const   KEY_RIGHT_SUPER     : 347      // Key: Super right
const   KEY_KB_MENU         : 348      // Key: KB menu
const   KEY_KP_0            : 320      // Key: Keypad 0
const   KEY_KP_1            : 321      // Key: Keypad 1
const   KEY_KP_2            : 322      // Key: Keypad 2
const   KEY_KP_3            : 323      // Key: Keypad 3
const   KEY_KP_4            : 324      // Key: Keypad 4
const   KEY_KP_5            : 325      // Key: Keypad 5
const   KEY_KP_6            : 326      // Key: Keypad 6
const   KEY_KP_7            : 327      // Key: Keypad 7
const   KEY_KP_8            : 328      // Key: Keypad 8
const   KEY_KP_9            : 329      // Key: Keypad 9
const   KEY_KP_DECIMAL      : 330      // Key: Keypad .
const   KEY_KP_DIVIDE       : 331      // Key: Keypad /
const   KEY_KP_MULTIPLY     : 332      // Key: Keypad *
const   KEY_KP_SUBTRACT     : 333      // Key: Keypad -
const   KEY_KP_ADD          : 334      // Key: Keypad +
const   KEY_KP_ENTER        : 335      // Key: Keypad Enter
const   KEY_KP_EQUAL        : 336      // Key: Keypad =
const   KEY_BACK            : 4        // Key: Android back button
const   KEY_MENU            : 5        // Key: Android menu button
const   KEY_VOLUME_UP       : 24       // Key: Android volume up button
const   KEY_VOLUME_DOWN     : 25        // Key: Android volume down button




prefab transform {
	eg.spatials.EgRotateOrder1
	eg.spatials.Transformation
	eg.spatials.Position3World
	eg.spatials.Orientation
	eg.spatials.OrientationWorld
	eg.spatials.Scale3 : {x: 1, y: 1, z: 1}
	eg.spatials.Position3 : {x: 0, y: 0, z: 0}
}

window0 {
	eg.windows.Window
	eg.shapes.Rectangle
}

draw3d {
	(flecs.core.DependsOn, window0)
	eg.raylib.Mode3DCreateInfo : {dummy: 0}
	eg.cameras.State
	// Set the order of the operands, changes how {Orientation} rotates
	eg.spatials.EgRotateOrder1
	eg.spatials.Position3 : {3, -4, 4}
	eg.spatials.Orientation : {-0.4, -0.1, -0.2, 0.8}
	eg.spatials.Rotate3 : {0, 0, 0}
	eg.spatials.Velocity3 : {0, 0, 0}
	eg.cameras.KeyBindings : {
		key_rotate_dx_plus:$KEY_UP, 
		key_rotate_dx_minus:$KEY_DOWN, 
		key_rotate_dy_plus:$KEY_RIGHT, 
		key_rotate_dy_minus:$KEY_LEFT, 
		key_rotate_dz_plus:$KEY_E, 
		key_rotate_dz_minus:$KEY_Q,
		key_move_dx_plus:$KEY_A, 
		key_move_dx_minus:$KEY_D, 
		key_move_dy_plus:$KEY_LEFT_CONTROL, 
		key_move_dy_minus:$KEY_SPACE, 
		key_move_dz_plus:$KEY_W, 
		key_move_dz_minus:$KEY_S, 
		key_fov_reset:$KEY_KP_0, 
		key_fov_plus:$KEY_KP_1, 
		key_fov_minus:$KEY_KP_2, 
	}
}


mesh_cube {
	eg.shapes.Box : {5,5,10,0}
}


cube1 : transform {
	(flecs.core.DependsOn, mesh_cube)
	eg.spatials.Position3 : {0,0,0}
}

cube2 : transform {
	(flecs.core.DependsOn, mesh_cube)
	eg.spatials.Position3 : {20,0,0}
}

cube3 : transform {
	(flecs.core.DependsOn, mesh_cube)
	eg.spatials.Position3 : {20,10,0}
}

cube4 : transform {
	(flecs.core.DependsOn, mesh_cube)
	eg.spatials.Position3 : {0,-10,0}
}

cube5 : transform {
	(flecs.core.DependsOn, mesh_cube)
	eg.spatials.Position3 : {0,-20,0}
	cube1 : transform {
		(flecs.core.DependsOn, mesh_cube)
		eg.spatials.Position3 : {0,5,0}
		eg.spatials.Scale3 : {x: 0.1, y: 0.1, z: 1}
	}
	cube2 : transform {
		(flecs.core.DependsOn, mesh_cube)
		eg.spatials.Position3 : {10,0,0}
		eg.spatials.Scale3 : {x: 0.1, y: 0.1, z: 1}
		cube1 : transform {
			(flecs.core.DependsOn, mesh_cube)
			eg.spatials.Position3 : {10,0,0}
			eg.spatials.Scale3 : {x: 0.1, y: 0.1, z: 1}
		}
	}
}

